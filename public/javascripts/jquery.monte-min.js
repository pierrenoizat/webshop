// Monte 1.0 - a carousel plugin for jQuery 1.3+
// Copyright (c) 2011 Jack Moore - jacklmoore.com
// Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
(function(a){a.monte=function(b,c){function A(){n=a(j[0]).css(e,2).show(),o=a(j[j.length-1]).css(x).css(e,1).show(),p=a(j[1]).css(w).css(e,1).show()}function B(b){a.isFunction(b)&&b.call(j)}function C(){B(h.callbackIn),z=y,y=+(new Date),n.animate(v,z?y-z:h.speed,function(){y=!1,l=0,B(h.callback),r&&(k=setTimeout(g.next,h.delay))})}function D(a){if(a>0&&l<1||a<0&&l>-1)clearTimeout(k),m=l,l=a,n.stop(),m===-a?C():(B(h.callbackAway),z=y,y=+(new Date),n.animate(a>0?x:w,z?y-z:h.speed,function(){y=!1,a>0?(o.css(e,0).hide(),j.push(j.shift()),l=2):(p.css(e,0).hide(),j.unshift(j.pop()),l=-2),A(),C()}))}function E(b,c){return a('<a href="#"/>').addClass(b).text(c).css(e,3)}var d="position",e="z-index",f="montePaused",g={},h=a.extend({},a.monte.defaults,c||{}),i=a(b),j=i.children().hide().css(d,"absolute").get(),k,l=0,m=0,n=a(j[0]),o,p,q=a([]),r=h.auto,s=h.scale||1,t=h.width||n.width(),u=h.height||n.height(),v={left:(i.width()-t)/2,width:t,height:u,top:0},w={left:i.width()-t*s,width:t*s,height:u*s,top:(u-u*s)/2},x=a.extend({},w,{left:0}),y=!1,z;return g.next=function(){D(1)},g.prev=function(){D(-1)},g.play=function(){r=!0,q.removeClass(f).text(h.pause),g.next()},g.pause=function(){clearTimeout(k),r=!1,q.addClass(f).text(h.play)},g.settings=h,i.css(d)==="static"&&i.css(d,"relative"),A(),n.css(v).show(),h.buttons&&i.append(E("montePrev",h.prev).click(function(a){a.preventDefault(),g.prev()}),q=E("montePlay",h.pause).click(function(a){a.preventDefault(),g[r?"pause":"play"]()}),E("monteNext",h.next).click(function(a){a.preventDefault(),g.next()})),r?k=setTimeout(g.next,h.delay):q.addClass(f).text(h.play),g},a.monte.defaults={height:!1,width:!1,scale:.85,speed:450,delay:3500,auto:!0,buttons:!0,next:"Next",prev:"Prev",play:"Play",pause:"Pause",callbackIn:!1,callbackAway:!1,callback:!1}})(jQuery);